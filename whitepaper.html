<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whitepaper // The Thermodynamic Ledger</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* Slate 950 */
            color: #cbd5e1; /* Slate 300 */
        }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .font-serif { font-family: 'Merriweather', serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .glass-panel {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border-right: 1px solid rgba(148, 163, 184, 0.1);
        }

        /* Typography overrides for the paper */
        .prose-custom h1, .prose-custom h2, .prose-custom h3 {
            color: #f1f5f9;
            font-family: 'Inter', sans-serif;
            letter-spacing: -0.025em;
        }
        .prose-custom p {
            margin-bottom: 1.5em;
            line-height: 1.8;
            font-family: 'Merriweather', serif; /* Serif for readability */
            font-weight: 300;
        }
        .prose-custom strong { color: #22d3ee; font-weight: 600; } /* Cyan highlights */
        
        .nav-active {
            color: #22d3ee;
            border-left-color: #22d3ee;
            background: linear-gradient(90deg, rgba(34, 211, 238, 0.1) 0%, transparent 100%);
        }
        
        /* Icon alignment */
        i.ph { vertical-align: middle; line-height: 1; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icon Wrapper ---
        const Icon = ({ name, size = 20, className = "" }) => (
            <i className={`ph ph-${name} ${className}`} style={{ fontSize: size }} />
        );

        // --- Math Component ---
        const Equation = ({ tex }) => {
            const containerRef = useRef(null);
            useEffect(() => {
                if (window.katex && containerRef.current) {
                    window.katex.render(tex, containerRef.current, {
                        throwOnError: false,
                        displayMode: true,
                        color: '#e2e8f0'
                    });
                }
            }, [tex]);
            return <div ref={containerRef} className="my-8 p-4 bg-slate-900/50 rounded border border-slate-800 overflow-x-auto" />;
        };

        // --- Data ---
        const TOC = [
            { id: "executive-summary", label: "1. Executive Summary" },
            { id: "entropy-crisis", label: "2. The Entropy Crisis" },
            { id: "physics-of-truth", label: "3. The Physics of Truth" },
            { id: "optimistic-verification", label: "4. Optimistic Verification" },
            { id: "network-topology", label: "5. Network Topology" },
            { id: "privacy", label: "6. Cryptographic Privacy" },
            { id: "simulation", label: "7. The Simulation Layer" },
            { id: "tokenomics", label: "8. Tokenomics" },
            { id: "roadmap", label: "9. Implementation Roadmap" },
            { id: "competition", label: "10. Competitive Analysis" }
        ];

        // --- Components ---

        const Sidebar = ({ activeSection }) => (
            <aside className="fixed top-0 left-0 h-screen w-64 glass-panel hidden lg:flex flex-col z-20">
                <div className="p-6 border-b border-slate-800">
                    <div className="flex items-center gap-2 font-mono font-bold text-cyan-400 text-sm mb-2">
                        <Icon name="atom" size={18} />
                        THERMODYNAMIC LEDGER
                    </div>
                    <div className="text-xs text-slate-500 font-mono">
                        REF: WHT-PPR-V3.0<br/>
                        CLASS: ENG-SPEC
                    </div>
                </div>

                <nav className="flex-1 overflow-y-auto py-6">
                    <ul className="space-y-1">
                        {TOC.map(item => (
                            <li key={item.id}>
                                <a 
                                    href={`#${item.id}`}
                                    className={`block py-2 px-6 text-xs font-mono border-l-2 transition-all duration-200 ${
                                        activeSection === item.id 
                                        ? "nav-active border-cyan-400 text-cyan-400" 
                                        : "border-transparent text-slate-500 hover:text-slate-300"
                                    }`}
                                >
                                    {item.label}
                                </a>
                            </li>
                        ))}
                    </ul>
                </nav>

                <div className="p-6 border-t border-slate-800">
                    <a href="index.html" className="flex items-center justify-center gap-2 w-full py-2 bg-slate-800 hover:bg-slate-700 text-white text-xs font-bold rounded transition-colors">
                        <Icon name="arrow-left" /> Back to Protocol
                    </a>
                </div>
            </aside>
        );

        const Header = () => (
            <div className="mb-16 border-b border-slate-800 pb-12">
                <div className="text-cyan-500 font-mono text-sm mb-4">December 29, 2025 // Version 3.0 (Golden Master)</div>
                <h1 className="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight">
                    The Thermodynamic Ledger: <br/>
                    <span className="text-slate-400">The Optimistic Protocol for Verified Autonomous Science</span>
                </h1>
                <div className="flex gap-4 mt-8">
                    <span className="px-3 py-1 rounded bg-slate-800 text-slate-300 text-xs font-mono flex items-center gap-2">
                        <Icon name="tag" /> Layer-1 Protocol
                    </span>
                    <span className="px-3 py-1 rounded bg-slate-800 text-slate-300 text-xs font-mono flex items-center gap-2">
                        <Icon name="file-lock" /> Engineering Spec
                    </span>
                </div>
            </div>
        );

        const Section = ({ id, title, children }) => (
            <section id={id} className="mb-20 scroll-mt-24">
                <h2 className="text-2xl font-bold text-white mb-6 border-l-4 border-cyan-500 pl-4">{title}</h2>
                <div className="prose-custom text-slate-300">
                    {children}
                </div>
            </section>
        );

        const Callout = ({ type = "info", title, children }) => {
            const styles = {
                info: "border-cyan-500 bg-cyan-950/20",
                warning: "border-amber-500 bg-amber-950/20",
                danger: "border-red-500 bg-red-950/20"
            };
            return (
                <div className={`p-6 my-8 rounded border-l-4 ${styles[type]} backdrop-blur-sm`}>
                    <h4 className="text-sm font-bold font-mono uppercase opacity-70 mb-2 flex items-center gap-2">
                        <Icon name={type === 'warning' ? 'warning' : 'info'} /> {title}
                    </h4>
                    <div className="text-sm italic text-slate-200">
                        {children}
                    </div>
                </div>
            );
        };

        const MainContent = () => {
            return (
                <main className="flex-1 lg:ml-64 p-6 md:p-12 max-w-4xl mx-auto relative">
                    <Header />

                    <Section id="executive-summary" title="1. Executive Summary">
                        <p>The digital economy stands at the precipice of a "Trust Singularity." As the marginal cost of generating intelligence via Large Language Models (LLMs) and generative AI approaches zero, the volume of synthetic information is exploding, threatening to overwhelm human and machine verification capacities alike. We are witnessing the acceleration of the <strong>"Ouroboros Loop"</strong>—a self-cannibalizing cycle where AI models are trained on data generated by other AI models.</p>
                        
                        <p>The Thermodynamic Ledger (v3.0) is a Layer-1 protocol designed to solve these twin crises of verification and entropy. It treats intelligence not as an abstract computational product but as a physical commodity: the <strong>thermodynamic work of reducing uncertainty</strong>. By anchoring digital claims to physical simulations, the protocol establishes a "Proof-of-Physics" consensus that is independent of human opinion or inter-subjective voting.</p>
                        
                        <Callout type="info" title="The Innovation">
                            Unlike previous attempts to verify every inference—a method that incurs a prohibitive "GPU Tax"—v3.0 introduces a <strong>Game-Theoretic Optimistic Verification</strong> model. This decouples Consensus (market agreement) from Truth (physics simulation).
                        </Callout>
                    </Section>

                    <Section id="entropy-crisis" title="2. The Entropy Crisis">
                        <p>The fundamental utility of intelligence is its ability to predict future states of a system. However, the current trajectory of Artificial Intelligence is threatened by the saturation of synthetic training data. As noted in recent studies on generative AI, models trained on the outputs of other models suffer from <strong>"Model Collapse,"</strong> a degenerative process where the tails of the probability distribution disappear, and the model converges on a low-entropy mean.</p>
                        
                        <p>Traditional blockchain consensus mechanisms (PoW/PoS) verify the <em>order</em> of transactions, not the <em>validity</em> of the information contained within them. They can prevent double-spending, but they cannot prevent a validly signed transaction from containing a scientific lie.</p>
                    </Section>

                    <Section id="physics-of-truth" title="3. The Physics of Truth">
                        <p>We ground the protocol in the physics of information. We define the Economic Value ($V$) of any scientific assertion as the inverse of its Ex-Post Surprise.</p>
                        
                        <Equation tex="V \propto \frac{1}{S_{ex-post}}" />
                        
                        <p>Where Surprise ($S$) is quantified by the Kullback-Leibler (KL) divergence between the predicted probability distribution $P$ and the actual physical distribution $Q$ revealed by the simulation kernel.</p>
                        
                        <Equation tex="D_{KL}(P || Q) = \sum_{x \in X} P(x) \log \left( \frac{P(x)}{Q(x)} \right)" />
                        
                        <p>In this framework, an agent generates value only when it accurately predicts a low-entropy state (a specific protein conformation, a stable material structure) that is subsequently validated by the high-fidelity simulation $Q$. If $P$ diverges from $Q$, the agent has generated noise, not intelligence, and is penalized.</p>
                    </Section>

                    <Section id="optimistic-verification" title="4. Optimistic Verification">
                        <p>The central architectural innovation of v3.0 is the recognition that Consensus and Truth operate on different thermodynamic schedules.</p>
                        
                        <h3 className="text-xl font-bold mt-8 mb-4">The Challenge Window</h3>
                        <p>The claim remains Provisional for a duration $T$ (The Challenge Window), typically set to 24-72 hours. During this time, Validator Agents (Watchtowers) scan the claim.</p>
                        
                        <ul className="list-disc pl-6 space-y-2 mb-6 font-serif">
                            <li><strong>Validation:</strong> Validators run L2 Surrogate models.</li>
                            <li><strong>Silence:</strong> If correct, nothing happens.</li>
                            <li><strong>Challenge:</strong> If discrepancy detected, Validator posts a Counter-Bond.</li>
                        </ul>

                        <h3 className="text-xl font-bold mt-8 mb-4">Game Theoretic Security</h3>
                        <p>The expected payoff for a Verifier challenging a claim is:</p>
                        
                        <Equation tex="E[V] = p(B - C) + (1-p)(-C)" />
                        
                        <p>This establishes the security threshold: Claims are only challenged if the probability of falsehood exceeds the ratio of simulation cost to bond size. By setting $B \gg C$ (e.g., Bond = 100x Cost), we force $p$ to be very small. Rational verifiers will aggressively hunt for errors.</p>
                    </Section>

                    <Section id="network-topology" title="5. Network Topology">
                        <p>The ecosystem is composed of three distinct actor classes, each optimizing for different thermodynamic niches.</p>
                        
                        <div className="grid md:grid-cols-3 gap-4 my-8 font-sans text-sm">
                            <div className="bg-slate-900 p-4 rounded border border-slate-800">
                                <div className="text-cyan-400 font-bold mb-2 flex items-center gap-2"><Icon name="brain" /> Predictors</div>
                                <p className="text-slate-400">"Miners" of intelligence. Utilize proprietary models to generate hypotheses. Incentivized to maximize FLUX yield.</p>
                            </div>
                            <div className="bg-slate-900 p-4 rounded border border-slate-800">
                                <div className="text-amber-400 font-bold mb-2 flex items-center gap-2"><Icon name="binoculars" /> Watchtowers</div>
                                <p className="text-slate-400">"Auditors" of the Mempool. Scan for hallucinations. Revenue comes from slashing dishonest Predictors.</p>
                            </div>
                            <div className="bg-slate-900 p-4 rounded border border-slate-800">
                                <div className="text-purple-400 font-bold mb-2 flex items-center gap-2"><Icon name="flask" /> Lab Nodes</div>
                                <p className="text-slate-400">"Oracles" of Ground Truth. Run deterministic simulations (AlphaFold). Paid in FLUX for compute.</p>
                            </div>
                        </div>
                    </Section>

                    <Section id="privacy" title="6. Cryptographic Privacy">
                        <p>Commercial adoption requires privacy. Pharmaceutical companies will not publish proprietary model weights. We solve this via the <strong>"Glass Box"</strong> architecture using Zero-Knowledge Proofs (ZKPs).</p>
                        
                        <p>When an agent initializes, it publishes a Pedersen Commitment to its model architecture and weights:</p>
                        
                        <Equation tex="C_{model} = Commit(W, r) = g^W h^r \pmod p" />
                        
                        <p>We utilize the <strong>Nova Folding Scheme</strong> for recursive proofs, allowing an agent to run continuous inference loops and produce a lightweight proof (~2 KB) that guarantees the agent followed its committed internal logic without revealing the logic itself.</p>
                    </Section>

                    <Section id="tokenomics" title="8. Tokenomics">
                        <p>The protocol employs a dual-token architecture—FLUX and ENT—modeled on the Burn-and-Mint Equilibrium (BME).</p>
                        
                        <Callout type="warning" title="BME Dynamics">
                            Separating the mechanism of payment (Action) from the storage of value (Truth).
                        </Callout>

                        <h3 className="text-xl font-bold mt-6 mb-2">FLUX (The Energy Token)</h3>
                        <p>Inflationary utility token. Used for Gas, Staking, and Compute payments. High velocity.</p>

                        <h3 className="text-xl font-bold mt-6 mb-2">ENT (The Truth Asset)</h3>
                        <p>Deflationary store of value. Minted only when an Agent proves a discovery of "High Thermodynamic Value" via simulation. ENT represents the right to consume verified entropy from the ledger.</p>
                    </Section>
                    
                    <div className="mt-20 pt-12 border-t border-slate-800 text-center text-slate-500 text-sm font-mono">
                        <p>End of Engineering Specification v3.0</p>
                        <p className="mt-2">© 2025 The Thermodynamic Foundation</p>
                    </div>
                </main>
            );
        };

        const App = () => {
            const [activeSection, setActiveSection] = useState("executive-summary");

            useEffect(() => {
                const handleScroll = () => {
                    const sections = TOC.map(item => document.getElementById(item.id));
                    const scrollPos = window.scrollY + 100;
                    
                    for (const section of sections) {
                        if (section && section.offsetTop <= scrollPos && (section.offsetTop + section.offsetHeight) > scrollPos) {
                            setActiveSection(section.id);
                        }
                    }
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return (
                <div className="min-h-screen bg-slate-950">
                    <Sidebar activeSection={activeSection} />
                    <MainContent />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
